<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>hello phaser!</title>
        <script src="phaser.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {
        var HexaList = [] ;
        var ActiveHexaList = [];
        var letters = [];
        var oldx = [];
        var oldy = [];
        var middleList = [];
        var game = new Phaser.Game(800, 600, Phaser.AUTO, 'Keliminate The Game', { preload: preload, create: create });


        function preload () {
            game.load.image('bgimage', 'assets/background.png');
            game.load.image('hexagon','assets/hexagon.png');
            game.load.image('scrumble','assets/blue.png');
            game.load.bitmapFont('arial', 'assets/font/font.png', 'assets/font/font.xml');
            fitScreen();
        }
        function fitScreen()
        {
          //for making the game Responsive !
          game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
          game.scale.updateLayout()
          game.scale.pageAlignHorizontally = true;
          game.scale.pageAlignVertically = true;
        }
        function create () {
            letters = ["a","b","c","d","e","รง","g","h","i","j"];
            //adding background to the game
            var bg = game.add.tileSprite(0, 0,1600,1200, 'bgimage');
            bg.anchor.x = 0.5;
            bg.anchor.y = 0.5;
            //call to create & show letters
            createHexagons();
            //keyboard input listener
            document.addEventListener('keydown', function(event) {

                  if(event.keyCode == 8) {
                      event.preventDefault();
                      alert('BackSpace Pressed');
                  }
                  else if(event.keyCode == 13) {
                      event.preventDefault();
                      alert('Enter Pressed');
                  }
                  else {
                    return true;
                  }
                  return false;
              });
            game.input.keyboard.onPressCallback = function(e){
            for (var i = 0; i < letters.length; i++) {
            if (letters[i] == e)
                {
                  addMiddle(HexaList[i]);
                  break;
                }
              }
            };

        }
        function createHexagons()
        {
            for(var i = 0; i < 10; i ++)
            {
                HexaList[i] = game.add.group();
                var hexsprite = game.add.sprite(i*75  + 60, 500, 'hexagon');
                hexsprite.anchor.x = 0.5;
                hexsprite.anchor.y = 0.5;
                hexsprite.scale.x = 0.03;
                hexsprite.scale.y = 0.03;
                var text = game.add.bitmapText(i*75  + 60, 500,'arial', letters[i], 32);
                text.anchor.set(0.5);
                game.physics.arcade.enable(text);
                game.physics.arcade.enable(hexsprite);
                HexaList[i].add(hexsprite);
                HexaList[i].add(text);
            }
        }
        function addMiddle(letter)
        {
          middleList.push(letter);
          var startLocation = 400 - (middleList.count / 2 *60 );
          alert("call");
          for (var i = 0; i < middleList.length; i++) {
            alert(middleList[i].getAt[1]);
            game.physics.arcade.moveToXY(middleList[i].getAt[1], startLocation + i * 60 , 250,30,1000);

          }
        }
        function update ()
        {

        }
    };
    </script>

    </body>
</html>
